<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Manager</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: #f1f5f9;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        h1 {
            color: #475569;
            text-align: center;
            margin-bottom: 30px;
            font-size: 28px;
        }

        .question-card {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            border: 1px solid #e2e8f0;
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
            gap: 10px;
        }

        .question-text {
            font-size: 18px;
            font-weight: 600;
            color: #334155;
            flex: 1;
        }

        .delete-btn {
            background: #64748b;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.2s;
        }

        .delete-btn:hover {
            background: #475569;
        }

        .options-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 8px;
            margin-bottom: 15px;
        }

        .option {
            padding: 10px;
            background: #f8fafc;
            border-radius: 6px;
            border: 2px solid #e2e8f0;
        }

        .option.correct {
            background: #d1fae5;
            border-color: #6ee7b7;
            font-weight: 600;
        }

        .info-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 10px;
            background: #f8fafc;
            border-radius: 6px;
            margin-bottom: 8px;
        }

        .info-section {
            background: #f8fafc;
            border-radius: 6px;
            padding: 15px;
            margin-bottom: 8px;
        }

        .info-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .info-label {
            font-weight: 600;
            color: #64748b;
            margin-right: 10px;
        }

        .info-value {
            flex: 1;
            color: #334155;
        }

        .info-content {
            color: #475569;
            line-height: 1.6;
            margin-top: 10px;
        }

        .edit-icon {
            background: #64748b;
            color: white;
            border: none;
            width: 32px;
            height: 32px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            transition: background 0.2s;
            flex-shrink: 0;
        }

        .edit-icon:hover {
            background: #475569;
        }

        .count-controls {
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .count-btn {
            background: #94a3b8;
            color: white;
            border: none;
            width: 28px;
            height: 28px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            transition: background 0.2s;
        }

        .count-btn:hover {
            background: #64748b;
        }

        .count-value {
            min-width: 40px;
            text-align: center;
            font-weight: 600;
        }

        .image-preview {
            max-width: 100%;
            max-height: 200px;
            border-radius: 6px;
            margin-top: 10px;
            display: block;
            border: 1px solid #e2e8f0;
        }

        .image-placeholder {
            width: 100%;
            height: 200px;
            background: #f1f5f9;
            border: 2px dashed #cbd5e1;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #94a3b8;
            font-size: 14px;
            margin-top: 15px;
        }

        .pagination {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 30px;
        }

        .page-btn {
            background: white;
            color: #64748b;
            border: 2px solid #e2e8f0;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.2s;
        }

        .page-btn:hover:not(:disabled) {
            background: #f8fafc;
            border-color: #cbd5e1;
        }

        .page-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .page-info {
            color: #475569;
            font-size: 16px;
            display: flex;
            align-items: center;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            padding: 20px;
            overflow-y: auto;
        }

        .modal.active {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: white;
            border-radius: 8px;
            padding: 30px;
            max-width: 600px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 20px;
            color: #334155;
        }

        .modal-body {
            margin-bottom: 20px;
        }

        textarea, input[type="text"] {
            width: 100%;
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: 6px;
            font-size: 16px;
            font-family: inherit;
            resize: vertical;
        }

        textarea {
            min-height: 150px;
        }

        textarea:focus, input:focus {
            outline: none;
            border-color: #94a3b8;
        }

        .modal-actions {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
        }

        .modal-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: background 0.2s;
        }

        .modal-btn-save {
            background: #64748b;
            color: white;
        }

        .modal-btn-save:hover {
            background: #475569;
        }

        .modal-btn-cancel {
            background: #e2e8f0;
            color: #64748b;
        }

        .modal-btn-cancel:hover {
            background: #cbd5e1;
        }

        .empty-state {
            background: white;
            border-radius: 8px;
            padding: 60px 20px;
            text-align: center;
            color: #64748b;
            border: 1px solid #e2e8f0;
        }

        .empty-state h2 {
            font-size: 24px;
            margin-bottom: 10px;
        }

        @media (min-width: 768px) {
            .options-grid {
                grid-template-columns: 1fr 1fr;
            }

            h1 {
                font-size: 36px;
            }

            .question-text {
                font-size: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìö Quiz Manager</h1>

        <div id="pagination1" class="pagination"></div>
        <div id="questionsContainer"></div>
        <div id="pagination2" class="pagination"></div> 
    </div>

    <!-- Explanation Modal -->
    <div id="explanationModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">Edit Explanation</div>
            <div class="modal-body">
                <textarea id="explanationInput" placeholder="Enter explanation..."></textarea>
            </div>
            <div class="modal-actions">
                <button class="modal-btn modal-btn-cancel" onclick="closeModal()">Cancel</button>
                <button class="modal-btn modal-btn-save" onclick="saveExplanation()">Save</button>
            </div>
        </div>
    </div>

    <!-- Image URL Modal -->
    <div id="imageModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">Edit Image URL</div>
            <div class="modal-body">
                <input type="text" id="imageUrlInput" placeholder="Enter image URL...">
                <div id="modalImagePreview" class="image-placeholder">Image preview will appear here</div>
            </div>
            <div class="modal-actions">
                <button class="modal-btn modal-btn-cancel" onclick="closeModal()">Cancel</button>
                <button class="modal-btn modal-btn-save" onclick="saveImageUrl()">Save</button>
            </div>
        </div>
    </div>

    <script>
        const STORAGE_KEY = 'quiz-all-answers-science';
        const ITEMS_PER_PAGE = 10;
        let currentPage = 1;
        let questions = [];
        let currentEditIndex = -1;

        // Initialize
        function init() {
            loadQuestions();
            renderQuestions();
        }

        // Load questions from localStorage
        function loadQuestions() {
            const stored = localStorage.getItem(STORAGE_KEY);
            if (stored) {
                try {
                    questions = JSON.parse(stored);
                } catch (e) {
                    questions = [];
                }
            } else {
                // Initialize with sample data
                questions = [{
                    "question": "Which vitamin helps in the clotting of blood?",
                    "options": [
                        "Vitamin A",
                        "Vitamin K",
                        "Vitamin D",
                        "Vitamin C"
                    ],
                    "correct_answer": "Vitamin K",
                    "explanation": "Vitamin K is essential for blood clotting as it helps in the synthesis of proteins required for coagulation. Without it, the body cannot properly stop bleeding after injury. Green leafy vegetables like spinach and kale are good sources of this vitamin.",
                    "correctCount": 0,
                    "wrongCount": 0,
                    "imageUrl": "http://www.ex.com/test.png"
                }];
                saveQuestions();
            }
        }

        // Save questions to localStorage
        function saveQuestions() {
            localStorage.setItem(STORAGE_KEY, JSON.stringify(questions));
        }

        // Render questions
        function renderQuestions() {
            const container = document.getElementById('questionsContainer');
            const totalPages = Math.ceil(questions.length / ITEMS_PER_PAGE);
            
            if (questions.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <h2>No Questions Yet</h2>
                        <p>Add some questions to get started!</p>
                    </div>
                `;
                document.getElementById('pagination').innerHTML = '';
                return;
            }

            const startIndex = (currentPage - 1) * ITEMS_PER_PAGE;
            const endIndex = startIndex + ITEMS_PER_PAGE;
            const pageQuestions = questions.slice(startIndex, endIndex);

            container.innerHTML = pageQuestions.map((q, index) => {
                const actualIndex = startIndex + index;
                return `
                    <div class="question-card">
                        <div class="question-header">
                            <div class="question-text">${q.question}</div>
                            <button class="delete-btn" onclick="deleteQuestion(${actualIndex})">Delete</button>
                        </div>
                        
                        <div class="options-grid">
                            ${q.options.map(opt => `
                                <div class="option ${opt === q.correct_answer ? 'correct' : ''}">
                                    ${opt}
                                </div>
                            `).join('')}
                        </div>

                        <div class="info-row">
                            <span class="info-label">Correct:</span>
                            <div class="count-controls">
                                <button class="count-btn" onclick="updateCount(${actualIndex}, 'correctCount', -1)">‚àí</button>
                                <span class="count-value">${q.correctCount}</span>
                                <button class="count-btn" onclick="updateCount(${actualIndex}, 'correctCount', 1)">+</button>
                            </div>
                        </div>

                        <div class="info-row">
                            <span class="info-label">Wrong:</span>
                            <div class="count-controls">
                                <button class="count-btn" onclick="updateCount(${actualIndex}, 'wrongCount', -1)">‚àí</button>
                                <span class="count-value">${q.wrongCount}</span>
                                <button class="count-btn" onclick="updateCount(${actualIndex}, 'wrongCount', 1)">+</button>
                            </div>
                        </div>

                        <div class="info-section">
                            <div class="info-header">
                                <span class="info-label">Explanation:</span>
                                <button class="edit-icon" onclick="editExplanation(${actualIndex})">‚úèÔ∏è</button>
                            </div>
                            <div class="info-content">${q.explanation || 'No explanation provided'}</div>
                        </div>

                        <div class="info-section">
                            <div class="info-header">
                                <span class="info-label">Image:</span>
                                <button class="edit-icon" onclick="editImageUrl(${actualIndex})">‚úèÔ∏è</button>
                            </div>
                            <div class="info-content" style="font-size: 14px; word-break: break-all;">${q.imageUrl || 'No image URL'}</div>
                            ${q.imageUrl ? `<img src="${q.imageUrl}" class="image-preview" onerror="this.style.display='none'">` : ''}
                        </div>
                    </div>
                `;
            }).join('');

            renderPagination(totalPages);
        }

        // Render pagination
        function renderPagination(totalPages) {
            const pagination1 = document.getElementById('pagination1');

            const pagination2 = document.getElementById('pagination2');
            
            if (totalPages <= 1) {
                pagination1.innerHTML = '';
pagination2.innerHTML = '';
                return;
            }

            pagination1.innerHTML = `
                <button class="page-btn" onclick="changePage(-1)" ${currentPage === 1 ? 'disabled' : ''}>Previous</button>
                <div class="page-info">Page ${currentPage} of ${totalPages}</div>
                <button class="page-btn" onclick="changePage(1)" ${currentPage === totalPages ? 'disabled' : ''}>Next</button>
            `;

pagination2.innerHTML = pagination1.innerHTML;
        }

        // Change page
        function changePage(delta) {
            const totalPages = Math.ceil(questions.length / ITEMS_PER_PAGE);
            const newPage = currentPage + delta;
            
            if (newPage >= 1 && newPage <= totalPages) {
                currentPage = newPage;
                renderQuestions();
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        // Update count
        function updateCount(index, field, delta) {
            questions[index][field] = Math.max(0, questions[index][field] + delta);
            saveQuestions();
            renderQuestions();
        }

        // Delete question
        function deleteQuestion(index) {
            if (confirm('Are you sure you want to delete this question?')) {
                questions.splice(index, 1);
                saveQuestions();
                
                // Adjust current page if needed
                const totalPages = Math.ceil(questions.length / ITEMS_PER_PAGE);
                if (currentPage > totalPages && totalPages > 0) {
                    currentPage = totalPages;
                } else if (questions.length === 0) {
                    currentPage = 1;
                }
                
                renderQuestions();
            }
        }

        // Edit explanation
        function editExplanation(index) {
            currentEditIndex = index;
            document.getElementById('explanationInput').value = questions[index].explanation || '';
            document.getElementById('explanationModal').classList.add('active');
        }

        // Save explanation
        function saveExplanation() {
            if (currentEditIndex >= 0) {
                questions[currentEditIndex].explanation = document.getElementById('explanationInput').value;
                saveQuestions();
                renderQuestions();
                closeModal();
            }
        }

        // Edit image URL
        function editImageUrl(index) {
            currentEditIndex = index;
            const input = document.getElementById('imageUrlInput');
            const previewContainer = document.getElementById('modalImagePreview');
            
            input.value = questions[index].imageUrl || '';
            
            if (input.value) {
                updateModalImagePreview(input.value);
            } else {
                resetModalImagePreview();
            }
            
            document.getElementById('imageModal').classList.add('active');
        }

        // Update modal image preview
        function updateModalImagePreview(url) {
            const previewContainer = document.getElementById('modalImagePreview');
            
            if (url) {
                const img = new Image();
                img.onload = function() {
                    previewContainer.innerHTML = '';
                    previewContainer.className = '';
                    const imgElement = document.createElement('img');
                    imgElement.src = url;
                    imgElement.className = 'image-preview';
                    previewContainer.appendChild(imgElement);
                };
                img.onerror = function() {
                    previewContainer.className = 'image-placeholder';
                    previewContainer.innerHTML = 'Invalid image URL';
                };
                img.src = url;
            } else {
                resetModalImagePreview();
            }
        }

        // Reset modal image preview
        function resetModalImagePreview() {
            const previewContainer = document.getElementById('modalImagePreview');
            previewContainer.className = 'image-placeholder';
            previewContainer.innerHTML = 'Image preview will appear here';
        }

        // Save image URL
        function saveImageUrl() {
            if (currentEditIndex >= 0) {
                questions[currentEditIndex].imageUrl = document.getElementById('imageUrlInput').value;
                saveQuestions();
                renderQuestions();
                closeModal();
            }
        }

        // Image preview on input
        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('imageUrlInput').addEventListener('input', (e) => {
                updateModalImagePreview(e.target.value);
            });
        });

        // Close modal
        function closeModal() {
            document.getElementById('explanationModal').classList.remove('active');
            document.getElementById('imageModal').classList.remove('active');
            resetModalImagePreview();
            currentEditIndex = -1;
        }

        // Close modal on outside click
        document.querySelectorAll('.modal').forEach(modal => {
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    closeModal();
                }
            });
        });

        // Initialize app
        init();
    </script>
</body>
</html>
